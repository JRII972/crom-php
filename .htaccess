SetEnvIf Authorization .+ HTTP_AUTHORIZATION=$0

RewriteEngine On
RewriteBase /

# Redirect /api/ calls to api/index.php
RewriteRule ^api/(.*)$ api/index.php [QSA,L]

# Allow direct access to files in public
RewriteCond %{REQUEST_URI} ^/public/
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Redirect static assets to /public/
RewriteRule ^(assets|data|fonts)/(.*)$ public/$1/$2 [L]

# For frontend routes, redirect to public/index.php
RewriteRule ^(.*)$ public/index.php [L]
